<div id="loadingScreen" style="height: 200px;">
    <p id="loadMessage"></p>
</div>
<div id="viewPlannerItems" style="display: none;">
    <p>
        Filter:
        <select id="taskFilter" onchange="handleTaskFilterChange();">
            <option value="all">Show all</option>
            <option value="days_7">Due within 7 days</option>
            <option value="days_30">Due within 30 days</option>
            <option value="status_upcoming">Upcoming period</option>
            <option value="status_grace">Grace period</option>
            <option value="status_overdue">Overdue</option>
            <option value="OR days_7 status_upcoming">Upcoming or 7 days</option>
            <option value="noDueDate">No due date</option>
        </select>
    </p>
    <div id="rootContainer"></div>
    <div id="plannerItemsPlaceholder"></div>
    <p>
        <button onclick="startTaskCreation();">Add Task</button><button onclick="addRootCategory();">Add Category</button>
    </p>
    <p>Legend:</p>
    <p id="statusLegend"></p>
</div>
<div id="editTask" style="display: none;">
    <p>
        Task name: <input id="editTaskName" style="width: 150px;" />
    </p>
    <p>
        Schedule type:
        <select id="scheduleType" onchange="handleScheduleTypeChange();">
            <option value="noDueDate">No due date</option>
            <option value="singleDueDate">Single due date</option>
            <option value="repeatingDueDate">Repeating due date</option>
        </select>
    </p>
    <p id="editFrequencyRow">
        Frequency: <input id="editFrequency" onblur="updateEditDueDate();" style="width: 80px;" /> days
    </p>
    <p id="editDueDateRow">
        <span id="editDueDateLabel"></span> <input id="editDueDate" type="date" style="margin-right: 15px;" />
        <span id="isManualContainer">
            <input id="dueDateIsManual" type="checkbox" onchange="updateEditDueDate();" /> Manual override
        </span>
    </p>
    <p>
        <input id="hasUpcomingPeriod" type="checkbox" onchange="handleUpcomingPeriodChange();" />
        <span name="upcomingCircle" class="statusCircle inlineCircle"></span> <span id="upcomingPeriodLabel"></span>
        <span id="editUpcomingContainer"><input id="editUpcomingPeriod" style="width: 80px;" /> days</span>
    </p>
    <p>
        <input id="hasGracePeriod" type="checkbox" onchange="handleGracePeriodChange();" />
        <span name="graceCircle" class="statusCircle inlineCircle"></span> <span id="gracePeriodLabel"></span>
        <span id="editGraceContainer"><input id="editGracePeriod" style="width: 80px;" /> days</span>
    </p>
    <p>Active months:</p>
    <div id="editActiveMonths" style="display: flex; align-items: center;"></div>
    <p>
        Parent category:
        <select id="editParentCategory"></select>
    </p>
    <p>
        Notes:<br />
        <textarea id="editTaskNotes" style="width: 300px; height: 80px;"></textarea>
    </p>
    <p>
        <button onclick="saveTask();">Save Task</button><button onclick="cancelTaskEdit();">Cancel</button>
    </p>
</div>
<div id="viewTask" style="display: none;">
    <p>
        <a onclick="viewPlannerItems();">Return to Task List</a>
    </p>
    <p>
        Task name: <span id="viewTaskName"></span>
    </p>
    <p id="viewDueDate"></p>
    <p id="viewUpcomingPeriod"></p>
    <p id="viewGracePeriod"></p>
    <p id="viewActiveMonths"></p>
    <p>
        Parent category: <span id="viewParentCategory"></span>
    </p>
    <p id="viewTaskNotes"></p>
    <p>
        <button onclick="startTaskEdit();">Edit Task</button><button onclick="deleteTask();">Delete Task</button>
    </p>
    <p>
        <strong>Add New Completion:</strong>
    </p>
    <div style="margin-left: 20px;">
        <p>
            Date: <input id="newCompletionDate" type="date" style="margin-right: 15px;" />
            <input id="dateIsApproximate" type="checkbox" /> Date is approximate
        </p>
        <p>
            Notes:<br />
            <textarea id="newCompletionNotes" style="width: 300px; height: 80px;"></textarea>
        </p>
        <p>
            <button onclick="saveNewCompletion();">Save Completion</button>
        </p>
    </div>
    <p>
        <strong>Past Completions:</strong>
    </p>
    <div id="pastCompletions" style="border: 1px #AAAAAA solid; padding: 10px; padding-left: 20px; max-height: 200px; overflow-y: scroll;"></div>
</div>
<div class="paragraph">
    <div style="float: left;">
        <a href="/changePassword">Change Password</a> | <a href="/logout">Log Out</a>
    </div>
    <div style="float: right;">
        <button id="downloadButton" onclick="downloadJsonFile();">Download JSON</button>
        <span id="downloadMessage" style="display: none;">Downloading JSON...</span>
    </div>
    <br style="clear: both;" />
</div>
<script>
initializePage();
</script>


